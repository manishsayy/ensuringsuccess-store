<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Educational Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      padding: 30px;
    }
    .product-card {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      margin: 10px;
      max-width: 300px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .product-card img {
      max-width: 100%;
      height: auto;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    .cart-preview {
      margin-top: 40px;
      background-color: #f8f8f8;
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
    }
  </style>
</head>
<body>
  <h2 class="text-primary mb-4">Welcome to the Educational Cart</h2>
  <div id="productsRow" class="d-flex flex-wrap"></div>

  <div class="cart-preview">
    <h5><i class="bi bi-cart"></i> Cart Preview</h5>
    <div id="cartItems" class="mt-3"></div>
    <hr />
    <p><strong>Total Cart Value:</strong> ₹<span id="totalPrice">0</span></p>
    <button class="btn btn-success" onclick="proceedToCheckout()">Proceed to Checkout</button>
  </div>

  <script>
    const products = [
      {
        id: "P1",
        name: "NISM Series XV: Research Analyst",
        price: 399,
        description: "Full-length mock test + solution PDF",
        image: "https://i.imgur.com/invalidimage1.jpg"
      },
      {
        id: "P2",
        name: "Investment Adviser Level 1 (X-A)",
        price: 349,
        description: "Chapterwise quiz + analysis",
        image: "https://i.imgur.com/invalidimage2.jpg"
      }
    ];

    const cart = [];

    function renderProducts() {
      const container = document.getElementById("productsRow");
      container.innerHTML = "";
      products.forEach((p) => {
        const card = document.createElement("div");
        card.className = "product-card";

        // Image creation using createElement + fallback
        const imgTag = document.createElement('img');
        imgTag.src = p.image;
        imgTag.alt = p.name;
        imgTag.onerror = function () {
          this.remove(); // Clean removal on broken link
        };
        card.appendChild(imgTag);

        // Remaining HTML content
        card.innerHTML += `
          <h5>${p.name}</h5>
          <p><strong>₹${p.price}</strong></p>
          <p>${p.description}</p>
          <button class="btn btn-primary" onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button>
        `;
        container.appendChild(card);
      });
    }

    function addToCart(product) {
      cart.push(product);
      console.log("Added to cart:", product);
      renderCart();
    }

    function renderCart() {
      const cartItems = document.getElementById("cartItems");
      cartItems.innerHTML = "";

      let total = 0;
      cart.forEach((item) => {
        total += item.price;
        const itemEl = document.createElement("div");
        itemEl.className = "border-bottom py-1";
        itemEl.textContent = `${item.name} – ₹${item.price}`;
        cartItems.appendChild(itemEl);
      });

      document.getElementById("totalPrice").innerText = total;
    }

    function proceedToCheckout() {
      alert("Checkout functionality coming soon!");
    }

    renderProducts();
  </script>
</body>
</html>
